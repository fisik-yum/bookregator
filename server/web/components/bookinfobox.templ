package components

import "server/db"
import "fmt"
import "strconv"

templ BookInfoBox(w db.Work, s db.Stat) {
	<div class="bookinfobox textcomponent container">
		<figure class="figure">
			if w.Cover!=nil {
				<img src={ fmt.Sprintf("https://covers.openlibrary.org/b/id/%s-L.jpg", *w.Cover) } class="figure-img img-fluid rounded border" alt="book cover"/>
			} else {
				<img src={ "https://openlibrary.org/images/icons/avatar_book-lg.png" } class="figure-img img-fluid rounded border" alt="book cover"/>
			}
			<figcaption>
				{ w.Title }
			</figcaption>
			if s.Rating!=nil && s.CiBound!=nil {
				<span class="infobadge">
					if *s.Rating<=float64(0) {
						No Rating
					} else {
						{ strconv.FormatFloat(*s.Rating,'f',2,64) } Â± 
						{ strconv.FormatFloat(*s.CiBound,'f',2,64) } out of 5 (95% CI)
					}
					| { *s.ReviewCount } ratings
				</span>
			} else {
				<span class="infobadge">
					No Ratings !
				</span>
			}
		</figure>
	</div>
}
